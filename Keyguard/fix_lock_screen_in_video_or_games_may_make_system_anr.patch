--- a/Keyguard/smali/com/android/keyguard/KeyguardViewManager.smali	2015-09-29 12:01:04.564143059 +0800
+++ b/Keyguard/smali/com/android/keyguard/KeyguardViewManager.smali	2015-09-29 12:02:47.000000000 +0800
@@ -1397,6 +1397,10 @@
     .param p1, "callback"    # Lcom/android/internal/policy/IKeyguardShowCallback;
 
     .prologue
+    const/4 v2, 0x5
+
+    invoke-direct {p0, v2}, Lcom/android/keyguard/KeyguardViewManager;->changeScreenRotation(I)V
+
     .line 465
     monitor-enter p0
 
@@ -1837,6 +1841,10 @@
     iget-object v2, p0, Lcom/android/keyguard/KeyguardViewManager;->mKeyguardView:Lcom/android/keyguard/KeyguardViewBase;
 
     invoke-virtual {v2}, Lcom/android/keyguard/KeyguardViewBase;->requestFocus()Z
+
+    const/4 v2, 0x0
+
+    invoke-direct {p0, v2}, Lcom/android/keyguard/KeyguardViewManager;->changeScreenRotation(I)V
     :try_end_0
     .catchall {:try_start_0 .. :try_end_0} :catchall_0
 
@@ -1980,3 +1988,79 @@
 
     throw v0
 .end method
+
+.method private changeScreenRotation(I)V
+    .locals 3
+    .param p1, "orien"    # I
+
+    .prologue
+    .line 146
+    const-string v0, "lushengduan"
+
+    new-instance v1, Ljava/lang/StringBuilder;
+
+    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V
+
+    const-string v2, "System orientation is: "
+
+    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v1
+
+    iget-object v2, p0, Lcom/android/keyguard/KeyguardViewManager;->mContext:Landroid/content/Context;
+
+    invoke-virtual {v2}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
+
+    move-result-object v2
+
+    invoke-virtual {v2}, Landroid/content/res/Resources;->getConfiguration()Landroid/content/res/Configuration;
+
+    move-result-object v2
+
+    iget v2, v2, Landroid/content/res/Configuration;->orientation:I
+
+    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;
+
+    move-result-object v1
+
+    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v1
+
+    invoke-static {v0, v1}, Landroid/util/Log;->e(Ljava/lang/String;Ljava/lang/String;)I
+
+    .line 147
+    iget-object v0, p0, Lcom/android/keyguard/KeyguardViewManager;->mContext:Landroid/content/Context;
+
+    invoke-virtual {v0}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
+
+    move-result-object v0
+
+    invoke-virtual {v0}, Landroid/content/res/Resources;->getConfiguration()Landroid/content/res/Configuration;
+
+    move-result-object v0
+
+    iget v0, v0, Landroid/content/res/Configuration;->orientation:I
+
+    const/4 v1, 0x2
+
+    if-ne v0, v1, :cond_0
+
+    .line 148
+    iget-object v0, p0, Lcom/android/keyguard/KeyguardViewManager;->mWindowLayoutParams:Landroid/view/WindowManager$LayoutParams;
+
+    iput p1, v0, Landroid/view/WindowManager$LayoutParams;->screenOrientation:I
+
+    .line 147
+    iget-object v0, p0, Lcom/android/keyguard/KeyguardViewManager;->mViewManager:Landroid/view/ViewManager;
+
+    iget-object v1, p0, Lcom/android/keyguard/KeyguardViewManager;->mKeyguardHost:Lcom/android/keyguard/KeyguardViewManager$ViewManagerHost;
+
+    iget-object v2, p0, Lcom/android/keyguard/KeyguardViewManager;->mWindowLayoutParams:Landroid/view/WindowManager$LayoutParams;
+
+    invoke-interface {v0, v1, v2}, Landroid/view/ViewManager;->updateViewLayout(Landroid/view/View;Landroid/view/ViewGroup$LayoutParams;)V
+
+    .line 151
+    :cond_0
+    return-void
+.end method
